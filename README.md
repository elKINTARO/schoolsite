# Радехівська школа мистецтв - Веб-сайт

Веб-сайт для Радехівської школи мистецтв імені митрополита Андрея Шептицького з системою управління контентом на базі Django.

## Технології

- **Backend**: Django 5.2.7
- **Frontend**: HTML, CSS, JavaScript
- **База даних**: SQLite (для розробки)

## Встановлення

### 1. Клонування репозиторію

```bash
git clone <url-репозиторію>
cd schoolsite
```

### 2. Створення віртуального середовища

Перейдіть в папку `backend` та створіть віртуальне середовище:

**Windows:**
```bash
cd backend
python -m venv .venv
```

**Linux/Mac:**
```bash
cd backend
python3 -m venv .venv
```

### 3. Активізація віртуального середовища

**Windows:**
```bash
.\.venv\Scripts\Activate.ps1
# Якщо виникає помилка з політикою виконання, виконайте:
Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass
.\.venv\Scripts\Activate.ps1
```

**Linux/Mac:**
```bash
source .venv/bin/activate
```

### 4. Встановлення залежностей

```bash
pip install -r requirements.txt
```

Це встановить:
- Django 5.2.7
- Pillow (для роботи з зображеннями)

### 5. Створення бази даних

Оскільки файл `db.sqlite3` не комітиться в репозиторій, потрібно створити базу даних з нуля:

```bash
python manage.py makemigrations
python manage.py migrate
```

Це створить:
- Таблиці для аутентифікації користувачів
- Таблиці для адмін-панелі
- Таблицю для постів (модель `Post`)

### 6. Створення суперкористувача (адміністратора)

Для доступу до адмін-панелі потрібно створити обліковий запис адміністратора:

```bash
python manage.py createsuperuser
```

Під час виконання команди вам буде запропоновано:
- **Ім'я користувача** (Username) - введіть бажане ім'я (наприклад, `admin`)
- **Email адреса** - введіть ваш email (можна залишити порожнім)
- **Password** - введіть надійний пароль (буде приховано під час введення)
- **Password (again)** - повторіть пароль для підтвердження

**Приклад:**
```
Ім'я користувача: admin
Email адреса: admin@school.com
Password: ********
Password (again): ********
Superuser created successfully.
```

## Запуск сервера

### Розробка

Запустіть сервер розробки Django:

```bash
python manage.py runserver
```

Сервер буде доступний за адресою: **http://localhost:8000/** або **http://127.0.0.1:8000/**

### Основні URL-адреси

- **Головна сторінка**: http://localhost:8000/
- **Адмін-панель**: http://localhost:8000/admin/
- **API постів**: http://localhost:8000/api/posts/

### Зупинка сервера

Натисніть `Ctrl+C` в терміналі, де запущений сервер.

## Використання адмін-панелі

### Вхід в адмін-панель

1. Перейдіть на http://localhost:8000/admin/
2. Введіть ім'я користувача та пароль, які ви створили під час виконання `createsuperuser`
3. Натисніть "Увійти"

### Управління постами

1. Після входу в адмін-панель знайдіть розділ **"News"** → **"Posts"**
2. Для створення нового поста:
   - Натисніть кнопку **"Add Post"** (або "Додати Post")
   - Заповніть форму:
     - **Title** - заголовок поста
     - **Content** - текст поста
     - **Author name** - ім'я автора (за замовчуванням "Радехівська школа мистецтв")
     - **Image** - зображення (опціонально)
     - **Is published** - чи опубліковано пост (залиште відмічено)
   - Натисніть **"Save"** (Зберегти)
3. Для редагування поста:
   - Натисніть на назву поста в списку
   - Внесіть зміни
   - Натисніть **"Save"**
4. Для видалення поста:
   - Відкрийте пост для редагування
   - Натисніть кнопку **"Delete"** (Видалити)
   - Підтвердіть видалення

**Примітка**: При видаленні поста автоматично видаляються пов'язані зображення з папки `media/posts/`.

## Структура проекту

```
schoolsite/
├── backend/              # Django backend
│   ├── manage.py        # Django management script
│   ├── requirements.txt # Python залежності
│   ├── db.sqlite3       # База даних (не комітиться)
│   ├── media/           # Завантажені файли (не комітиться)
│   │   └── posts/       # Зображення постів
│   ├── news/            # Django додаток для новин
│   │   ├── models.py    # Модель Post
│   │   ├── admin.py     # Налаштування адмін-панелі
│   │   ├── views.py     # API views
│   │   ├── urls.py      # URL маршрути для API
│   │   └── signals.py   # Сигнали для видалення файлів
│   └── schoolsite/      # Налаштування проекту
│       ├── settings.py  # Налаштування Django
│       ├── urls.py      # Головні URL маршрути
│       └── ...
└── frontend/            # Frontend файли
    ├── index.html       # Головна сторінка
    ├── *.html           # Інші HTML сторінки
    ├── *.css            # Стилі
    ├── *.js             # JavaScript файли
    └── assets/          # Статичні файли (зображення, логотипи)
```

## API

### Отримання списку постів

**GET** `/api/posts/`

**Відповідь:**
```json
{
  "results": [
    {
      "id": 1,
      "title": "Заголовок поста",
      "content": "Текст поста",
      "author": "Радехівська школа мистецтв",
      "created_at": "2024-11-03T21:00:00.000Z",
      "image": "http://localhost:8000/media/posts/image.jpg"
    }
  ]
}
```

## Функціональність

- ✅ Система управління постами через адмін-панель Django
- ✅ Відображення постів на головній сторінці
- ✅ Завантаження та відображення зображень у постах
- ✅ Редагування та видалення постів
- ✅ Автоматичне видалення файлів зображень при видаленні поста
- ✅ Пошук по сайту з підсвічуванням тексту
- ✅ Адаптивний дизайн

## Розробка

### Створення нових міграцій

Якщо ви змінили моделі, створіть нові міграції:

```bash
python manage.py makemigrations
python manage.py migrate
```

### Збір статичних файлів (для продакшну)

```bash
python manage.py collectstatic
```

## Вирішення проблем

### Помилка "ModuleNotFoundError: No module named 'django'"

Переконайтеся, що ви:
1. Активували віртуальне середовище
2. Встановили залежності: `pip install -r requirements.txt`

### Помилка "No such table: news_post"

Виконайте міграції:
```bash
python manage.py migrate
```

### Помилка при завантаженні зображень

Переконайтеся, що папка `backend/media/posts/` існує. Вона створюється автоматично при першому завантаженні файлу.

### Зображення не відображаються

Перевірте, що:
1. Сервер запущений
2. URL `/media/` правильно налаштований в `settings.py`
3. Файли знаходяться в `backend/media/posts/`


